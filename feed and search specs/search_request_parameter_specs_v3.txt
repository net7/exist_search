Hi Danilo,



Yet again I have updated the search specs. Again the changes are in the mc* parameters. Now mc_from and mc_to are used for slice (range) search only. Search for single values are done with the mc parameter. I have renamed the old mc parameter to mc_all. mc_all is used for search on the whole contribution.



The request for a critical edition search will be a POST request with the following parameters:

. . . . . . . . . . . . . . . . .

   search_type=mc

The value "mc" means that the search is a macrocontribution search and not a "normal" search. If you forget this parameter, or don't want to use it, you can leave it out. The servlet will see from other parameters that a macrocontribution search is what you want.

. . . . . . . . . . . . . . . . .

   words=...
   operator=...

These are the old full text search parameters. They work as before.

. . . . . . . . . . . . . . . . .

   mc=...
   mc_from=...
   mc_to=...
   mc_all=...

These are parameters to search in the structure of the macrocontribution.

In general these parameters have comma-delimited lists of values, except for the last one.

The search values are URIs.

(a) mc:

Each search value in the parameter is used to search for the contributions for a particular material in the structure, e.g a certain book, chapter, page, paragraph or zone. The search value is the URI of that material in the macrocontribution.

(b) mc_from and mc_to:

These parameters are used to search for a particular "slice" or "range" or "subsequence" within a particular material, e.g contributions for paragraphs 22 through 33 of a certain book.

The search values are URIs. In the example above they are URIs for the paragraphs 22 and 33.

Note that only "low level" slices can be searched. With "low level" here is meant what the user can select in the "from" and "to" listboxes in the advanced search form - typically paragraphs or pages.

(Note that the servlet can search for a slice that crosses book boundaries (e.g paragraph 22 in book 3 through paragraph 11 in book 5). But the search interface doesn't allow this.)

The mc_from/mc_to values must occur in pairs, i.e, the two parameters must have the same number of values. Furthermore, the values must be non-empty. The servlet cannot supply default values for them. (The search interface must do so.)

(Note URI values are not directly suitable for slice/range/subsequence/from-to search. Therefore the search servlet will first translate the relevant URIs to "search keys". These "search keys" can be found in the eXist database. The servlet retrieves "search keys" by doing one or more preliminary searches in the eXist database. Afterwards it will do the real search with these "search keys".)

(c) mc_all:

This parameter is used for a search on the whole macrocontribution.

The value is the URI of the macrocontribution.

There can only be a single value.

The mc_all parameter cannot be combined with the other three parameters.

The other three parameters can be freely combined, and have any number of values (as long as the mc_from and mc_to parameters have the same number of values). The critera are combined with logical OR.

. . . . . . . . . . . . . . . . .

   preferred=...
   version_type=...
   version_layer=...

These are parameters necessary to retrieve only the relevant versions.

For Nietszche use
   preferred=true

I think for Wittgenstein you would use e.g
   version_type=diplomatic

. . . . . . . . . . . . . . . . .



Cheers,

- Ã˜ystein -

